## Бэкэнд проекта "Кабинет репетитора"

<p>`Кабинет репетитора` - это сервис, предназначенный для учителей, менторов, репетиторов, коучей и всех,
кто занимается обучением людей и кому необходим инструмент для планирования своего времени и
взаимодействия с учениками.</p>

<p>Бэкенд проекта представляет из себя REST API,
позволяющий пользователям регистрироваться, как в качестве репетиторов так и учеников.
<strong>Основным отличием и преимуществом нашего сервиса</strong> перед другими подобными является то, 
что для того, чтобы репетитор мог добавить себе виртуального ученика, 
<strong>реальному пользователю-ученику необязательно регистрироваться на нашем сервисе.</strong></p>

<p>Репетитор может <strong>самостоятельно</strong> создать ученика на нашем сервисе и использовать его в своём планировании,
а после, при необходимости, через наш сервис он сможет отправить приглашение на почту реальному пользователю-ученику 
и  после его регистрации, отправить запрос на добавление.
Такая реализация позволяет репетиторам и наставникам использовать сервис, 
не ожидая обязательной регистрации пользователей-учеников.</p>

<p>Репетиторы имеют возможность выбирать себе предметы для преподавания. 
После добавления учеников, им можно назначать уроки и учитывать их в своём расписании, 
задавать домашние задания, назначать учебные материалы и отправлять сообщения.
Сервис по большей части предназначен для репетиторов и наставников, но и ученики имеют не мало возможностей: 
они могут просматривать своё расписание, в котором будут запланированные его репетиторами уроки, 
подтверждать выполнение домашних заданий и отчитываться о них, отправлять сообщения репетиторам и просматривать
материалы, присланные его репетиторами.</p>

<p>Для проекта написан ci/cd пайплайн с деплоем на тестовый сервер. 
Дополнительно происходит автоматический деплой документации API при изменениях.</p>


## Содержание

- [Документация к проекту](#документация-к-проекту)
- [Как приступить к разработке?](#как-приступить-к-разработке)
- [Несколько требований к проекту](#несколько-требований-к-проекту)
- [Использованные технологии](#использованные-технологии)
- [Авторы](#авторы)

## Документация к проекту

 - [Документация к API](http://77.232.131.254/docs/redoc.html)

<p align="right"><a href="#top">⬆️ Наверх</a></p>

## Как приступить к разработке?

  1. Клонировать репозиторий `git clone https://github.com/TutorOffice/TutorOffice-backend.git`
  2. Перейти в папку с проектом `cd core`
  3. Создать и активировать виртуальное окружение
     ```
     python -m venv .venv
     source env/bin/activate - (активация для Linux)
     .venv\Scripts\activate - (активация для Windows)
     ```
  4. Установить зависимости
     ```
     python -m pip install --upgrade pip
     pip install -r requirements.txt
     ```
  5. Во внутренней папке core cоздать файл .env по шаблону:
     ```
     EMAIL_HOST_USER=lk.repetitor@mail.ru
     EMAIL_HOST_PASSWORD=<Пароль спрашивайте в дискорде>
     EMAIL_HOST = 'smtp.mail.ru'
     EMAIL_PORT = 465
     EMAIL_USE_SSL = True
     EMAIL_USE_TLS = False
     SECRET_KEY=random-django-secret-key
     DJANGO_ALLOWED_HOSTS="127.0.0.1 localhost"
     DEBUG=True
     ```
  6. Применить миграции и запустить сервер
     ```
     python manage.py migrate
     python manage.py runserver
     ```
  7. В отдельном терминале запустить воркер celery (требуется также Redis)
     ```
     celery -A core worker -l info
     ```
  7.1 Для Windows у celery есть специальный костыль.
     ```
     celery -A core worker -l info --pool=solo
     ```
  8. Перейти в ветку разраработки `git checkout dev`
  9. Из ветки `dev` создать и перейти в ветку с названием вашей работы `git checkout -b feature/api`
  10. Можно приступать к работе :)

<p align="right"><a href="#top">⬆️ Наверх</a></p>

## Несколько требований к проекту

  - Оформляем код по [PEP8](https://peps.python.org/pep-0008/)
  - Форматируем код black с настройкой `--line-length=79 --skip-string-normalization`, isort
  - Кавычки везде, где применимо одинарные
  - Все классы и основные функции документируем хотя бы в 1 строку: `"""Модель юзеров"""`
  - Используем линтер flake8 (перед PR обязательно)
  - Для именования запрещены транслит, сокращения, названия переменных, приложений, урлов и т.д. должны быть переведены на английский

<p align="right"><a href="#top">⬆️ Наверх</a></p>

## Как работать с git

 - Проект содержит основую ветку `main`. Она предназначена для релизного состояния приложения
 - Ветка `release` является предрелизной и предназначена для фиксации функционала из ветки dev и для его последующего предоставления тестировщикам.
 - Ветка `dev` предназначена для слияния работ.
 - Для того чтобы смержить изменения в ветку `dev` необходимо из этой ветки создать ветку с вашей работой и создать пул реквест
 - Название вашей рабочей ветки должно отражать вашу работу. Например `feature/api-users` или `feature/models`
 - Коммиты разрешается писать как на русском, так и на английском. Начинается коммит с глагола, отвечающий на вопрос "что будет, если этот коммит слить с остальным кодом?" Например, "фиксит пермишины" или "добавляет тесты эндпоинта юзеров"
 - Если пул реквест принят ветка в которой велась разработка удаляется
 - [Подробнее о git-flow](https://github.com/SergeFocus/git-flow)

<p align="right"><a href="#top">⬆️ Наверх</a></p>

## Использованные технологии

 - Python 3.11
 - Django
 - Django Rest Framework
 - Celery
 - Redis
 - Docker

## Авторы:

 - [Данил](https://github.com/orbins)
 - [Ирина](https://github.com/IrinaFinatova)
 - [Рабадан](https://github.com/Rabadan-Ibr)
 - [Александр](https://github.com/SanUlrich)

 <p align="right"><a href="#top">⬆️ Наверх</a></p>